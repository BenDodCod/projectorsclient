[pytest]
# Enhanced Projector Control Application - pytest Configuration
# Note: Most configuration is in pyproject.toml [tool.pytest.ini_options]
# This file provides backward compatibility and IDE support

minversion = 7.0
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Test markers for selective execution
markers =
    unit: Unit tests - fast, isolated (CI default)
    integration: Integration tests - with real databases, mocked projectors (nightly)
    e2e: End-to-end tests - full workflow testing
    slow: Slow tests taking more than 1 second
    requires_projector: Tests requiring physical projector hardware
    requires_sqlserver: Tests requiring SQL Server connection

# Default command-line options
addopts =
    -v
    --strict-markers
    --strict-config
    -ra
    --tb=short

# Filter warnings
filterwarnings =
    error
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Timeout for individual tests (seconds)
# timeout = 30  # Requires pytest-timeout

# asyncio mode for async tests (requires pytest-asyncio)
# asyncio_mode = auto

# Logging configuration
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Coverage integration (when running with --cov)
# Run: pytest --cov=src --cov-report=html --cov-fail-under=85
